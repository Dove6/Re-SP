OBJECT=G_BFIRSTENTRY
G_BFIRSTENTRY:TYPE=BOOL
G_BFIRSTENTRY:VALUE=TRUE
G_BFIRSTENTRY:TOINI=TRUE
G_BFIRSTENTRY:ONINIT={GRUPAGLOWNA^ADD("G_BFIRSTENTRY");}

OBJECT=G_IEPSCOMPLETED
G_IEPSCOMPLETED:TYPE=INTEGER
G_IEPSCOMPLETED:VALUE=1
G_IEPSCOMPLETED:TOINI=TRUE
G_IEPSCOMPLETED:ONINIT={GRUPAGLOWNA^ADD("G_IEPSCOMPLETED");@IF("G_IEPSCOMPLETED<1","{G_IEPSCOMPLETED^SET(1);}","");@IF("G_IEPSCOMPLETED>10","{G_IEPSCOMPLETED^SET(10);}","");}

OBJECT=G_SOSTVERSION
G_SOSTVERSION:TYPE=STRING
G_SOSTVERSION:VALUE=JACHOWICZ
G_SOSTVERSION:TOINI=TRUE
G_SOSTVERSION:ONINIT={@IF("G_SOSTVERSION'"JACHOWICZ"","{@BREAK();}","");@IF("G_SOSTVERSION'"BROSZ"","{@BREAK();}","");G_SOSTVERSION^SET("JACHOWICZ");}

OBJECT=G_IMUSICVOLUME
G_IMUSICVOLUME:TYPE=INTEGER
G_IMUSICVOLUME:VALUE=800
G_IMUSICVOLUME:TOINI=TRUE
G_IMUSICVOLUME:ONINIT={@IF("G_IMUSICVOLUME<0","{G_IMUSICVOLUME^SET(0);}","");@IF("G_IMUSICVOLUME>800","{G_IMUSICVOLUME^SET(800);}","");}

OBJECT=G_BACC
G_BACC:TYPE=BOOL
G_BACC:VALUE=TRUE
G_BACC:TOINI=TRUE

# EPISODE 2

OBJECT=G_IEP2GENERALSTAGE
G_IEP2GENERALSTAGE:TYPE=INTEGER
G_IEP2GENERALSTAGE:VALUE=0
G_IEP2GENERALSTAGE:TOINI=TRUE
G_IEP2GENERALSTAGE:ONINIT={G_GRPEP2INI^ADD("G_IEP2GENERALSTAGE");@IF("G_IEP2GENERALSTAGE<0","{G_IEP2GENERALSTAGE^SET(0);}","");@IF("G_IEP2GENERALSTAGE>3","{G_IEP2GENERALSTAGE^SET(3);}","");}
# MEANING:
# 0 - initial value
# 1 - after first episode entry
# 2 - after meeting Robinson for the first time
# 3 - after witnessing Robinson's farewell

OBJECT=G_IEP2MAPREVEALINGSTAGE
G_IEP2MAPREVEALINGSTAGE:TYPE=INTEGER
G_IEP2MAPREVEALINGSTAGE:VALUE=0
G_IEP2MAPREVEALINGSTAGE:TOINI=TRUE
G_IEP2MAPREVEALINGSTAGE:ONINIT={G_GRPEP2INI^ADD("G_IEP2MAPREVEALINGSTAGE");@IF("G_IEP2MAPREVEALINGSTAGE<0","{G_IEP2MAPREVEALINGSTAGE^SET(0);}","");@IF("G_IEP2MAPREVEALINGSTAGE>9","{G_IEP2MAPREVEALINGSTAGE^SET(9);}","");}
# MEANING:
# 0 - initial value
# 1 - after acquiring the bottled map
# 2 - after consulting Robinson about the blank map
# 3 - after using the bottle (w/o consulting)
# 4 - after using the bottle (w/ consulting)
# 5 - after igniting the campfire (w/o consulting)
# 6 - after igniting the campfire (w/ consulting)
# 7 - after first revealing attempt
# 8 - after successful map revealing
# 9 - after getting a revealed map in the inventory

OBJECT=G_IEP2DOOROPENINGSTAGE
G_IEP2DOOROPENINGSTAGE:TYPE=INTEGER
G_IEP2DOOROPENINGSTAGE:VALUE=0
G_IEP2DOOROPENINGSTAGE:TOINI=TRUE
G_IEP2DOOROPENINGSTAGE:ONINIT={G_GRPEP2INI^ADD("G_IEP2DOOROPENINGSTAGE");@IF("G_IEP2DOOROPENINGSTAGE<0","{G_IEP2DOOROPENINGSTAGE^SET(0);}","");@IF("G_IEP2DOOROPENINGSTAGE>3","{G_IEP2DOOROPENINGSTAGE^SET(3);}","");}
# MEANING:
# 0 - initial value
# 1 - after Robinson's introduction to the quest
# 2 - after catching the geese
# 3 - after opening the door

OBJECT=G_IEP2CLICKEDFIELDS
G_IEP2CLICKEDFIELDS:TYPE=INTEGER
G_IEP2CLICKEDFIELDS:VALUE=0
G_IEP2CLICKEDFIELDS:TOINI=TRUE
G_IEP2CLICKEDFIELDS:ONINIT={G_GRPEP2INI^ADD("G_IEP2CLICKEDFIELDS");@IF("G_IEP2CLICKEDFIELDS<0","{G_IEP2CLICKEDFIELDS^SET(0);}","");}

OBJECT=GRUPAGLOWNA
GRUPAGLOWNA:TYPE=GROUP

OBJECT=G_GRPEP1INI
G_GRPEP1INI:TYPE=GROUP

OBJECT=G_GRPEP2INI
G_GRPEP2INI:TYPE=GROUP

OBJECT=ROZDZIAL3
ROZDZIAL3:TYPE=GROUP

OBJECT=ROZDZIAL4
ROZDZIAL4:TYPE=GROUP

OBJECT=ROZDZIAL5
ROZDZIAL5:TYPE=GROUP

OBJECT=ROZDZIAL6
ROZDZIAL6:TYPE=GROUP

OBJECT=ROZDZIAL7
ROZDZIAL7:TYPE=GROUP

OBJECT=ROZDZIAL8
ROZDZIAL8:TYPE=GROUP

OBJECT=ROZDZIAL9
ROZDZIAL9:TYPE=GROUP

#########################MAPA#########################

#
#POZYCJAREKSIAWFABULE
#
OBJECT=POZYCJAREKSIA
POZYCJAREKSIA:TYPE=STRING
POZYCJAREKSIA:VALUE=0
POZYCJAREKSIA:TOINI=TRUE

#
#POZYCJAREKSIAPODWULKANEM
#
OBJECT=POZYCJAWULKAN
POZYCJAWULKAN:TYPE=STRING
POZYCJAWULKAN:VALUE=15B
POZYCJAWULKAN:TOINI=TRUE

#
#CZYKURCZAKA
#
OBJECT=CZYKURCZAKA
CZYKURCZAKA:TYPE=INTEGER
CZYKURCZAKA:VALUE=0
CZYKURCZAKA:TOINI=TRUE
CZYKURCZAKA:ONINIT={ROZDZIAL4^ADD("CZYKURCZAKA");}

#######ZMIENNEPIOTRAWRZECE##########

#
#VARREKSIORZEKA
#
OBJECT=VARREKSIORZEKA
VARREKSIORZEKA:TYPE=INTEGER
VARREKSIORZEKA:VALUE=0
VARREKSIORZEKA:TOINI=FALSE

##########ZMIENNEPIOTRAWWIOSCE############
#
#VARROZMSTRURWISKA
#
OBJECT=VARROZMSTRURWISKA
VARROZMSTRURWISKA:TYPE=INTEGER
VARROZMSTRURWISKA:VALUE=0
VARROZMSTRURWISKA:TOINI=TRUE
VARROZMSTRURWISKA:ONINIT={ROZDZIAL4^ADD("VARROZMSTRURWISKA");}

#
#VARKROLEWNAETAPMUZYKA
#
OBJECT=VARKROLEWNAETAPMUZYKA
VARKROLEWNAETAPMUZYKA:TYPE=INTEGER
VARKROLEWNAETAPMUZYKA:VALUE=0
VARKROLEWNAETAPMUZYKA:TOINI=TRUE
VARKROLEWNAETAPMUZYKA:ONINIT={ROZDZIAL4^ADD("VARKROLEWNAETAPMUZYKA");}

#
#VARKROLEWNAETAPPERLY
#
OBJECT=VARKROLEWNAETAPPERLY
VARKROLEWNAETAPPERLY:TYPE=INTEGER
VARKROLEWNAETAPPERLY:VALUE=0
VARKROLEWNAETAPPERLY:TOINI=TRUE
VARKROLEWNAETAPPERLY:ONINIT={ROZDZIAL4^ADD("VARKROLEWNAETAPPERLY");}

#
#VARKROLEWNAZALICZONAMISJA
#
OBJECT=VARKROLEWNAZALICZONAMISJA
VARKROLEWNAZALICZONAMISJA:TYPE=INTEGER
VARKROLEWNAZALICZONAMISJA:VALUE=0
VARKROLEWNAZALICZONAMISJA:TOINI=TRUE
VARKROLEWNAZALICZONAMISJA:ONINIT={ROZDZIAL4^ADD("VARKROLEWNAZALICZONAMISJA");}

#
#VARKROLEWNAGLEJT
#
OBJECT=VARKROLEWNAGLEJT
VARKROLEWNAGLEJT:TYPE=INTEGER
VARKROLEWNAGLEJT:VALUE=0
VARKROLEWNAGLEJT:TOINI=TRUE
VARKROLEWNAGLEJT:ONINIT={ROZDZIAL4^ADD("VARKROLEWNAGLEJT");}

#
#VARKROLEWNAZLECONEPERLY
#
OBJECT=VARKROLEWNAZLECONEPERLY
VARKROLEWNAZLECONEPERLY:TYPE=INTEGER
VARKROLEWNAZLECONEPERLY:VALUE=0
VARKROLEWNAZLECONEPERLY:TOINI=TRUE
VARKROLEWNAZLECONEPERLY:ONINIT={ROZDZIAL4^ADD("VARKROLEWNAZLECONEPERLY");}

#
#VARKURCZAKOPIRATACH
#
OBJECT=VARKURCZAKOPIRATACH
VARKURCZAKOPIRATACH:TYPE=INTEGER
VARKURCZAKOPIRATACH:VALUE=0
VARKURCZAKOPIRATACH:TOINI=TRUE
VARKURCZAKOPIRATACH:ONINIT={ROZDZIAL4^ADD("VARKURCZAKOPIRATACH");}

#
#VARZALICZONAPALISADA
#
OBJECT=VARZALICZONAPALISADA
VARZALICZONAPALISADA:TYPE=INTEGER
VARZALICZONAPALISADA:VALUE=0
VARZALICZONAPALISADA:TOINI=TRUE
VARZALICZONAPALISADA:ONINIT={ROZDZIAL4^ADD("VARZALICZONAPALISADA");}

#
#VARMENUGLEJT
#
OBJECT=VARMENUGLEJT
VARMENUGLEJT:TYPE=INTEGER
VARMENUGLEJT:VALUE=0
VARMENUGLEJT:TOINI=TRUE
VARMENUGLEJT:ONINIT={ROZDZIAL4^ADD("VARMENUGLEJT");}

#
#VARMENUPERLA
#
OBJECT=VARMENUPERLA
VARMENUPERLA:TYPE=INTEGER
VARMENUPERLA:VALUE=0
VARMENUPERLA:TOINI=TRUE
VARMENUPERLA:ONINIT={ROZDZIAL4^ADD("VARMENUPERLA");}

#
#VARZLECONAMUZYKA
#
OBJECT=VARZLECONAMUZYKA
VARZLECONAMUZYKA:TYPE=INTEGER
VARZLECONAMUZYKA:VALUE=0
VARZLECONAMUZYKA:TOINI=TRUE
VARZLECONAMUZYKA:ONINIT={ROZDZIAL4^ADD("VARZLECONAMUZYKA");}

#########POCHODNIAPRZEDLAW¹
OBJECT=INT_POCHODNIA
INT_POCHODNIA:TYPE=INTEGER
INT_POCHODNIA:VALUE=0
INT_POCHODNIA:TOINI=FALSE
INT_POCHODNIA:ONINIT={ROZDZIAL6^ADD("INT_POCHODNIA");}

OBJECT=VARLAWA
VARLAWA:TYPE=INTEGER
VARLAWA:VALUE=0
VARLAWA:TOINI=FALSE
VARLAWA:ONINIT={ROZDZIAL6^ADD("VARLAWA");}

OBJECT=VARLAWAZYCIA
VARLAWAZYCIA:TYPE=INTEGER
VARLAWAZYCIA:VALUE=5
VARLAWAZYCIA:TOINI=FALSE
VARLAWAZYCIA:ONINIT={ROZDZIAL6^ADD("VARLAWAZYCIA");}

############ZMIENNEKRZYCHA##################
#
#CZY_WYLAZL
#
OBJECT=CZY_WYLAZL
CZY_WYLAZL:TYPE=INTEGER
CZY_WYLAZL:VALUE=0
CZY_WYLAZL:TOINI=TRUE
CZY_WYLAZL:ONINIT={ROZDZIAL5^ADD("CZY_WYLAZL");}

#
#CZY_OTWIERAC
#
OBJECT=CZY_OTWIERAC
CZY_OTWIERAC:TYPE=INTEGER
CZY_OTWIERAC:VALUE=0
CZY_OTWIERAC:TOINI=TRUE
CZY_OTWIERAC:ONINIT={ROZDZIAL5^ADD("CZY_OTWIERAC");}

#
#INT_WROTA
#
OBJECT=INT_WROTA
INT_WROTA:TYPE=INTEGER
INT_WROTA:VALUE=1
INT_WROTA:TOINI=TRUE
INT_WROTA:ONINIT={ROZDZIAL5^ADD("INT_WROTA");}

#
#INT_Z_JAKIEJ_PLANSZY
#
OBJECT=INT_Z_JAKIEJ_PLANSZY
INT_Z_JAKIEJ_PLANSZY:TYPE=INTEGER
INT_Z_JAKIEJ_PLANSZY:DESCRIPTION="CZY-PRZECHODZI-Z-PLANSZY-17-DO-16B-I-ODWROTNIE-OBSLUGAWLAWIE"
INT_Z_JAKIEJ_PLANSZY:VALUE=0
INT_Z_JAKIEJ_PLANSZY:TOINI=TRUE
INT_Z_JAKIEJ_PLANSZY:ONINIT={ROZDZIAL6^ADD("INT_Z_JAKIEJ_PLANSZY");}

#
#STOP_16_REKS
#
OBJECT=STOP_16_REKS
STOP_16_REKS:TYPE=INTEGER
STOP_16_REKS:VALUE=0
STOP_16_REKS:TOINI=TRUE
STOP_16_REKS:ONINIT={ROZDZIAL6^ADD("STOP_16_REKS");}
#
#POZYCJA_W_LABIRYNCIE
#
OBJECT=POZYCJA_W_LABIRYNCIE
POZYCJA_W_LABIRYNCIE:TYPE=INTEGER
POZYCJA_W_LABIRYNCIE:VALUE=0
POZYCJA_W_LABIRYNCIE:TOINI=TRUE
POZYCJA_W_LABIRYNCIE:ONINIT={ROZDZIAL6^ADD("POZYCJA_W_LABIRYNCIE");}
#
#INT_DRZWI
#
OBJECT=INT_DRZWI
INT_DRZWI:TYPE=INTEGER
INT_DRZWI:VALUE=0
INT_DRZWI:TOINI=TRUE
INT_DRZWI:ONINIT={ROZDZIAL6^ADD("INT_DRZWI");}
#
#POZYCJA_WROT_INI
#
OBJECT=POZYCJA_WROT_INI
POZYCJA_WROT_INI:TYPE=INTEGER
POZYCJA_WROT_INI:VALUE=1
POZYCJA_WROT_INI:TOINI=TRUE
POZYCJA_WROT_INI:ONINIT={ROZDZIAL5^ADD("POZYCJA_WROT_INI");}

#
#ZMIENNAWODPAPUG
#
OBJECT=CZYZ22B
CZYZ22B:TYPE=INTEGER
CZYZ22B:VALUE=0
CZYZ22B:TOINI=TRUE
CZYZ22B:ONINIT={ROZDZIAL9^ADD("CZYZ22B");}


#####DODATKOWEZMIENNEDOSAVEGAMEA

OBJECT=G_EP1LASTSCENE
G_EP1LASTSCENE:TYPE=STRING
G_EP1LASTSCENE:VALUE=NAWRAKU
G_EP1LASTSCENE:TOINI=TRUE
G_EP1LASTSCENE:ONINIT={G_GRPEP1INI^ADD("G_EP1LASTSCENE");}

OBJECT=SAVEROZDZIAL6
SAVEROZDZIAL6:TYPE=STRING
SAVEROZDZIAL6:VALUE=15BWTWAROGU
SAVEROZDZIAL6:TOINI=TRUE
SAVEROZDZIAL6:ONINIT={ROZDZIAL6^ADD("SAVEROZDZIAL6");}

OBJECT=SAVEROZDZIAL8
SAVEROZDZIAL8:TYPE=STRING
SAVEROZDZIAL8:VALUE=ZAWAL
SAVEROZDZIAL8:TOINI=TRUE
SAVEROZDZIAL8:ONINIT={ROZDZIAL8^ADD("SAVEROZDZIAL8");}

OBJECT=SAVEROZDZIAL9
SAVEROZDZIAL9:TYPE=STRING
SAVEROZDZIAL9:VALUE=25PAPUGI
SAVEROZDZIAL9:TOINI=TRUE
SAVEROZDZIAL9:ONINIT={ROZDZIAL9^ADD("SAVEROZDZIAL9");}


OBJECT=G_SNDBKGMUSIC
G_SNDBKGMUSIC:TYPE=SOUND
G_SNDBKGMUSIC:FILENAME=SFX\000.WAV
G_SNDBKGMUSIC:PRELOAD=FALSE
G_SNDBKGMUSIC:FLUSHAFTERPLAYED=FALSE
G_SNDBKGMUSIC:ONFINISHED={THIS^PLAY();}

OBJECT=G_SCURMUSIC
G_SCURMUSIC:TYPE=STRING
G_SCURMUSIC:VALUE=$WAVS\SFX\000.WAV

OBJECT=G_STRBKGMUSIC
G_STRBKGMUSIC:TYPE=STRUCT
G_STRBKGMUSIC:FIELDS=SCENE<STRING>,JACHOWICZ<STRING>,BROSZ<STRING>

OBJECT=G_DTBBKGMUSIC
G_DTBBKGMUSIC:TYPE=DATABASE
G_DTBBKGMUSIC:MODEL=G_STRBKGMUSIC
G_DTBBKGMUSIC:ONINIT={THIS^LOAD("$COMMON\BKGMUSIC.DTA");}

OBJECT=BEHINITSCENEMUSIC
BEHINITSCENEMUSIC:TYPE=BEHAVIOUR
BEHINITSCENEMUSIC:CODE={@INT("L_IROWNO",G_DTBBKGMUSIC^FIND("SCENE",@GETCURRENTSCENE(),0));@IF("L_IROWNO>'0","BEHINITSCENEMUSIC_SUB1","");}

OBJECT=BEHINITSCENEMUSIC_SUB1
BEHINITSCENEMUSIC_SUB1:TYPE=BEHAVIOUR
BEHINITSCENEMUSIC_SUB1:CODE={G_DTBBKGMUSIC^SELECT(L_IROWNO);G_STRBKGMUSIC^SET("G_DTBBKGMUSIC_CURSOR");@IF("G_SOSTVERSION'"BROSZ"","{BEHPLAYMUSIC^RUN(G_STRBKGMUSIC|BROSZ);}","{BEHPLAYMUSIC^RUN(G_STRBKGMUSIC|JACHOWICZ);}");}

# ARGUMENTS: $1 - music file name
OBJECT=BEHPLAYMUSIC
BEHPLAYMUSIC:TYPE=BEHAVIOUR
BEHPLAYMUSIC:CODE={@STRING("L_SFILEPATH",["$WAVS\BKG\"+$1]);@IF("L_SFILEPATH^FIND(".WAV")<0","{L_SFILEPATH^ADD(".WAV");}","");@IF("$1!'"NULL"","BEHPLAYMUSIC_SUB1","BEHSTOPMUSIC");G_SNDBKGMUSIC^SETVOLUME(G_IMUSICVOLUME);}

OBJECT=BEHPLAYMUSIC_SUB1
BEHPLAYMUSIC_SUB1:TYPE=BEHAVIOUR
BEHPLAYMUSIC_SUB1:CODE={@IF("G_SCURMUSIC!'L_SFILEPATH","{G_SNDBKGMUSIC^LOAD(L_SFILEPATH);G_SCURMUSIC^SET(L_SFILEPATH);}","");@IF("G_SNDBKGMUSIC^ISPLAYING()'FALSE","{G_SNDBKGMUSIC^PLAY();}","");}

OBJECT=BEHSTOPMUSIC
BEHSTOPMUSIC:TYPE=BEHAVIOUR
BEHSTOPMUSIC:CODE={G_SNDBKGMUSIC^STOP(FALSE);}

