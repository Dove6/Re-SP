OBJECT=SPASSWORD
SPASSWORD:TYPE=STRING

OBJECT=ITRYCOUNT
ITRYCOUNT:TYPE=INTEGER
ITRYCOUNT:VALUE=1
ITRYCOUNT:TOINI=FALSE


######################################
##############  ANIMO  ###############
######################################

OBJECT=EKRAN
EKRAN:TYPE=ANIMO
EKRAN:VISIBLE=FALSE
EKRAN:FILENAME=EKRAN.ANN
EKRAN:TOCANVAS=TRUE
EKRAN:PRIORITY=0
EKRAN:FPS=16
EKRAN:PRELOAD=TRUE
EKRAN:RELEASE=TRUE
EKRAN:MONITORCOLLISION=FALSE
EKRAN:MONITORCOLLISIONALPHA=FALSE
EKRAN:ONFINISHED=BEHENABLEBUTTONS

OBJECT=ZNACZKI1
ZNACZKI1:TYPE=ANIMO
ZNACZKI1:VISIBLE=FALSE
ZNACZKI1:FILENAME=ZNACZKI1.ANN
ZNACZKI1:TOCANVAS=TRUE
ZNACZKI1:PRIORITY=0
ZNACZKI1:FPS=16
ZNACZKI1:PRELOAD=TRUE
ZNACZKI1:RELEASE=TRUE
ZNACZKI1:MONITORCOLLISION=FALSE
ZNACZKI1:MONITORCOLLISIONALPHA=FALSE

OBJECT=ZNACZKI2
ZNACZKI2:TYPE=ANIMO
ZNACZKI2:VISIBLE=FALSE
ZNACZKI2:FILENAME=ZNACZKI2.ANN
ZNACZKI2:TOCANVAS=TRUE
ZNACZKI2:PRIORITY=0
ZNACZKI2:FPS=16
ZNACZKI2:PRELOAD=TRUE
ZNACZKI2:RELEASE=TRUE
ZNACZKI2:MONITORCOLLISION=FALSE
ZNACZKI2:MONITORCOLLISIONALPHA=FALSE

OBJECT=ZNACZKI3
ZNACZKI3:TYPE=ANIMO
ZNACZKI3:VISIBLE=FALSE
ZNACZKI3:FILENAME=ZNACZKI3.ANN
ZNACZKI3:TOCANVAS=TRUE
ZNACZKI3:PRIORITY=0
ZNACZKI3:FPS=16
ZNACZKI3:PRELOAD=TRUE
ZNACZKI3:RELEASE=TRUE
ZNACZKI3:MONITORCOLLISION=FALSE
ZNACZKI3:MONITORCOLLISIONALPHA=FALSE

OBJECT=ZNACZKI4
ZNACZKI4:TYPE=ANIMO
ZNACZKI4:VISIBLE=FALSE
ZNACZKI4:FILENAME=ZNACZKI4.ANN
ZNACZKI4:TOCANVAS=TRUE
ZNACZKI4:PRIORITY=0
ZNACZKI4:FPS=16
ZNACZKI4:PRELOAD=TRUE
ZNACZKI4:RELEASE=TRUE
ZNACZKI4:MONITORCOLLISION=FALSE
ZNACZKI4:MONITORCOLLISIONALPHA=FALSE


######################################
##############  IMAGE  ###############
######################################

OBJECT=KLAWISZ1
KLAWISZ1:TYPE=IMAGE
KLAWISZ1:VISIBLE=TRUE
KLAWISZ1:FILENAME=KLAWISZ1.IMG
KLAWISZ1:TOCANVAS=TRUE
KLAWISZ1:PRIORITY=0
KLAWISZ1:PRELOAD=TRUE
KLAWISZ1:RELEASE=TRUE
KLAWISZ1:MONITORCOLLISION=FALSE
KLAWISZ1:MONITORCOLLISIONALPHA=FALSE

OBJECT=KLAWISZ2
KLAWISZ2:TYPE=IMAGE
KLAWISZ2:VISIBLE=TRUE
KLAWISZ2:FILENAME=KLAWISZ2.IMG
KLAWISZ2:TOCANVAS=TRUE
KLAWISZ2:PRIORITY=0
KLAWISZ2:PRELOAD=TRUE
KLAWISZ2:RELEASE=TRUE
KLAWISZ2:MONITORCOLLISION=FALSE
KLAWISZ2:MONITORCOLLISIONALPHA=FALSE

OBJECT=KLAWISZ3
KLAWISZ3:TYPE=IMAGE
KLAWISZ3:VISIBLE=TRUE
KLAWISZ3:FILENAME=KLAWISZ3.IMG
KLAWISZ3:TOCANVAS=TRUE
KLAWISZ3:PRIORITY=0
KLAWISZ3:PRELOAD=TRUE
KLAWISZ3:RELEASE=TRUE
KLAWISZ3:MONITORCOLLISION=FALSE
KLAWISZ3:MONITORCOLLISIONALPHA=FALSE

OBJECT=KLAWISZ4
KLAWISZ4:TYPE=IMAGE
KLAWISZ4:VISIBLE=TRUE
KLAWISZ4:FILENAME=KLAWISZ4.IMG
KLAWISZ4:TOCANVAS=TRUE
KLAWISZ4:PRIORITY=0
KLAWISZ4:PRELOAD=TRUE
KLAWISZ4:RELEASE=TRUE
KLAWISZ4:MONITORCOLLISION=FALSE
KLAWISZ4:MONITORCOLLISIONALPHA=FALSE

OBJECT=KLAWISZ5
KLAWISZ5:TYPE=IMAGE
KLAWISZ5:VISIBLE=TRUE
KLAWISZ5:FILENAME=KLAWISZ5.IMG
KLAWISZ5:TOCANVAS=TRUE
KLAWISZ5:PRIORITY=0
KLAWISZ5:PRELOAD=TRUE
KLAWISZ5:RELEASE=TRUE
KLAWISZ5:MONITORCOLLISION=FALSE
KLAWISZ5:MONITORCOLLISIONALPHA=FALSE

OBJECT=KLAWISZ6
KLAWISZ6:TYPE=IMAGE
KLAWISZ6:VISIBLE=TRUE
KLAWISZ6:FILENAME=KLAWISZ6.IMG
KLAWISZ6:TOCANVAS=TRUE
KLAWISZ6:PRIORITY=0
KLAWISZ6:PRELOAD=TRUE
KLAWISZ6:RELEASE=TRUE
KLAWISZ6:MONITORCOLLISION=FALSE
KLAWISZ6:MONITORCOLLISIONALPHA=FALSE

OBJECT=ENTER
ENTER:TYPE=IMAGE
ENTER:VISIBLE=TRUE
ENTER:FILENAME=ENTER.IMG
ENTER:TOCANVAS=TRUE
ENTER:PRIORITY=0
ENTER:PRELOAD=TRUE
ENTER:RELEASE=TRUE
ENTER:MONITORCOLLISION=FALSE
ENTER:MONITORCOLLISIONALPHA=FALSE

OBJECT=BEXIT
BEXIT:TYPE=IMAGE
BEXIT:VISIBLE=TRUE
BEXIT:FILENAME=BWYJSCIE.IMG
BEXIT:TOCANVAS=TRUE
BEXIT:PRIORITY=0
BEXIT:PRELOAD=TRUE
BEXIT:RELEASE=TRUE
BEXIT:MONITORCOLLISION=FALSE
BEXIT:MONITORCOLLISIONALPHA=FALSE

OBJECT=BEXITOM
BEXITOM:TYPE=IMAGE
BEXITOM:VISIBLE=TRUE
BEXITOM:FILENAME=BWYJSCIEOM.IMG
BEXITOM:TOCANVAS=TRUE
BEXITOM:PRIORITY=0
BEXITOM:PRELOAD=TRUE
BEXITOM:RELEASE=TRUE
BEXITOM:MONITORCOLLISION=FALSE
BEXITOM:MONITORCOLLISIONALPHA=FALSE

OBJECT=BEXITOC
BEXITOC:TYPE=IMAGE
BEXITOC:VISIBLE=TRUE
BEXITOC:FILENAME=BWYJSCIEOC.IMG
BEXITOC:TOCANVAS=TRUE
BEXITOC:PRIORITY=0
BEXITOC:PRELOAD=TRUE
BEXITOC:RELEASE=TRUE
BEXITOC:MONITORCOLLISION=FALSE
BEXITOC:MONITORCOLLISIONALPHA=FALSE


######################################
##############  BUTTON  ##############
######################################

OBJECT=BUT1
BUT1:TYPE=BUTTON
BUT1:VISIBLE=TRUE
BUT1:ENABLE=FALSE
BUT1:DRAGGABLE=FALSE
BUT1:GFXSTANDARD=KLAWISZ1
BUT1:ONACTION={BEHPUTDIGIT^RUN("1");}

OBJECT=BUT2
BUT2:TYPE=BUTTON
BUT2:VISIBLE=TRUE
BUT2:ENABLE=FALSE
BUT2:DRAGGABLE=FALSE
BUT2:GFXSTANDARD=KLAWISZ2
BUT2:ONACTION={BEHPUTDIGIT^RUN("2");}

OBJECT=BUT3
BUT3:TYPE=BUTTON
BUT3:VISIBLE=TRUE
BUT3:ENABLE=FALSE
BUT3:DRAGGABLE=FALSE
BUT3:GFXSTANDARD=KLAWISZ3
BUT3:ONACTION={BEHPUTDIGIT^RUN("3");}

OBJECT=BUT4
BUT4:TYPE=BUTTON
BUT4:VISIBLE=TRUE
BUT4:ENABLE=FALSE
BUT4:DRAGGABLE=FALSE
BUT4:GFXSTANDARD=KLAWISZ4
BUT4:ONACTION={BEHPUTDIGIT^RUN("4");}

OBJECT=BUT5
BUT5:TYPE=BUTTON
BUT5:VISIBLE=TRUE
BUT5:ENABLE=FALSE
BUT5:DRAGGABLE=FALSE
BUT5:GFXSTANDARD=KLAWISZ5
BUT5:ONACTION={BEHPUTDIGIT^RUN("5");}

OBJECT=BUT6
BUT6:TYPE=BUTTON
BUT6:VISIBLE=TRUE
BUT6:ENABLE=FALSE
BUT6:DRAGGABLE=FALSE
BUT6:GFXSTANDARD=KLAWISZ6
BUT6:ONACTION={BEHPUTDIGIT^RUN("6");}

OBJECT=ENTERBUT
ENTERBUT:TYPE=BUTTON
ENTERBUT:VISIBLE=TRUE
ENTERBUT:ENABLE=FALSE
ENTERBUT:DRAGGABLE=FALSE
ENTERBUT:GFXSTANDARD=ENTER
ENTERBUT:ONACTION=BEHVALIDATE

OBJECT=GLINABUT
GLINABUT:TYPE=BUTTON
GLINABUT:VISIBLE=TRUE
GLINABUT:RECT=100,400,280,599
GLINABUT:ENABLE=FALSE
GLINABUT:DRAGGABLE=FALSE
GLINABUT:ONACTION={GLINA^PLAY("GADA3B");}

OBJECT=EXITPROGAM
EXITPROGAM:TYPE=BUTTON
EXITPROGAM:VISIBLE=TRUE
EXITPROGAM:ENABLE=FALSE
EXITPROGAM:DRAGGABLE=FALSE
EXITPROGAM:GFXSTANDARD=BEXIT
EXITPROGAM:GFXONCLICK=BEXITOC
EXITPROGAM:GFXONMOVE=BEXITOM
EXITPROGAM:SNDONMOVE=EKSTRA5
EXITPROGAM:ONACTION={RATUNEK^GOTO("POKONTROLI");}


######################################
################  SEQ  ###############
######################################

OBJECT=GLINA
GLINA:TYPE=SEQUENCE
GLINA:FILENAME=GLINA.SEQ
GLINA:ONFINISHED^ENTRE={THIS^PLAY("GADA1");}
GLINA:ONFINISHED^GADA1={THIS^PLAY("GADA2");}
GLINA:ONFINISHED^GADA2={THIS^PLAY("GADA3");}
GLINA:ONFINISHED^GADA3={THIS^PLAY("POKAZUJE");}
GLINA:ONFINISHED^POKAZUJE={EKRAN^PLAY("PLAY");}
GLINA:ONFINISHED^GADA4={THIS^PLAY("GADA5");}
GLINA:ONFINISHED^GADA7={THIS^PLAY("OK");}
GLINA:ONFINISHED^OK={THIS^PLAY("EXIT");}
GLINA:ONFINISHED^EXIT=BEHNEXTEPISODE


######################################
###############  SOUND  ##############
######################################

OBJECT=EKSTRA5
EKSTRA5:TYPE=SOUND
EKSTRA5:FILENAME=EKSTRA5.WAV


######################################
##############  ARRAY  ###############
######################################

OBJECT=ARRAYHASLA
ARRAYHASLA:TYPE=ARRAY


######################################
##########  CANVASOBSERVER  ##########
######################################

OBJECT=MOUSE
MOUSE:TYPE=MOUSE

OBJECT=KEYBOARD
KEYBOARD:TYPE=KEYBOARD

OBJECT=CANVASOBSERVER
CANVASOBSERVER:TYPE=CANVAS_OBSERVER


######################################
############  BEHAVIOUR  #############
######################################

OBJECT=BEHENABLEBUTTONS
BEHENABLEBUTTONS:TYPE=BEHAVIOUR
BEHENABLEBUTTONS:CODE={BUT1^ENABLE();BUT2^ENABLE();BUT3^ENABLE();BUT4^ENABLE();BUT5^ENABLE();BUT6^ENABLE();ENTERBUT^ENABLE();GLINABUT^ENABLE();ARRAYHASLA^INSERTAT(0,0);}

OBJECT=BEHDISABLEBUTTONS
BEHDISABLEBUTTONS:TYPE=BEHAVIOUR
BEHDISABLEBUTTONS:CODE={BUT1^DISABLEBUTVISIBLE();BUT2^DISABLEBUTVISIBLE();BUT3^DISABLEBUTVISIBLE();BUT4^DISABLEBUTVISIBLE();BUT5^DISABLEBUTVISIBLE();BUT6^DISABLEBUTVISIBLE();ENTERBUT^DISABLEBUTVISIBLE();GLINABUT^DISABLEBUTVISIBLE();}

OBJECT=BEHPUTDIGIT
BEHPUTDIGIT:TYPE=BEHAVIOUR
BEHPUTDIGIT:CODE={@STRING("L_SDIGIT",$1);@IF("L_SDIGIT^LENGTH()>1","{L_SDIGIT^CUT(0,1);}","");SPASSWORD^ADD(L_SDIGIT);@IF("SPASSWORD^LENGTH()>4","{SPASSWORD^CUT([SPASSWORD^LENGTH()-4],4);}","");@LOOP("{@INT("L_IDIGIT",SPASSWORD^GET([_I_-5+SPASSWORD^LENGTH()]));*["ZNACZKI"+_I_]^SHOW();*["ZNACZKI"+_I_]^SETFRAME([L_IDIGIT-1]);}",[5-SPASSWORD^LENGTH()],SPASSWORD^LENGTH(),1);}

OBJECT=BEHVALIDATE
BEHVALIDATE:TYPE=BEHAVIOUR
BEHVALIDATE:CODE={BEHDISABLEBUTTONS^RUN();@IF("SPASSWORD'"5432"","BEHLETGO","BEHRESTART");}

OBJECT=BEHLETGO
BEHLETGO:TYPE=BEHAVIOUR
BEHLETGO:CODE={G_BACC^SET(TRUE);GLINA^PLAY("GADA7");}

OBJECT=BEHNEXTEPISODE
BEHNEXTEPISODE:TYPE=BEHAVIOUR
BEHNEXTEPISODE:CODE={G_GRPEP2INI^RESETINI();ROZDZIAL3^RESETINI();VARREKSIORZEKA^SET(0);RATUNEK^GOTO("RZEKA1");}

OBJECT=BEHRESTART
BEHRESTART:TYPE=BEHAVIOUR
BEHRESTART:CODE={BEHCOMPLAIN^RUN();SPASSWORD^SET("");BEHENABLEBUTTONS^RUN();ITRYCOUNT^INC();@LOOP("{*["ZNACZKI"+_I_]^HIDE();}",1,4,1);EXITPROGAM^ENABLE();}

OBJECT=BEHCOMPLAIN
BEHCOMPLAIN:TYPE=BEHAVIOUR
BEHCOMPLAIN:CODE={@IF("ITRYCOUNT<'4","{GLINA^PLAY("GADA4");}","");@IF("ITRYCOUNT'5","{GLINA^PLAY("GADA5");}","");@IF("ITRYCOUNT>'6","{GLINA^PLAY("GADA6");}","");}

OBJECT=__INIT__
__INIT__:TYPE=BEHAVIOUR
__INIT__:CODE={BEHINITSCENEMUSIC^RUN(); !ANIMATIONS_INIT; GLINA^PLAY("ENTRE");SPASSWORD^SET("");}

